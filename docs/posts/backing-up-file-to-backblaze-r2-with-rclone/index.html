<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="en">

    <meta name="author" content="Hunter Parks">
    <meta name="description" content="Backing up files is arguably one of the most important things someone can do on their computer. Ensuring there is a copy of your most important data affords you the ability to not worry about a future ransomware virus, a stolen/broken computer, or just a simple accident that could erase your information forever.
A strategy that is widely seen as a very effective way to backup your data is the 3-2-1 Backup Rules/Best Practices:">
    <meta name="keywords" content="blog,developer,software,devops,engineer,personal">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Backing up Files to Backblaze B2 with Rclone"/>
<meta name="twitter:description" content="Backing up files is arguably one of the most important things someone can do on their computer. Ensuring there is a copy of your most important data affords you the ability to not worry about a future ransomware virus, a stolen/broken computer, or just a simple accident that could erase your information forever.
A strategy that is widely seen as a very effective way to backup your data is the 3-2-1 Backup Rules/Best Practices:"/>

    <meta property="og:title" content="Backing up Files to Backblaze B2 with Rclone" />
<meta property="og:description" content="Backing up files is arguably one of the most important things someone can do on their computer. Ensuring there is a copy of your most important data affords you the ability to not worry about a future ransomware virus, a stolen/broken computer, or just a simple accident that could erase your information forever.
A strategy that is widely seen as a very effective way to backup your data is the 3-2-1 Backup Rules/Best Practices:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hunterparks.com/posts/backing-up-file-to-backblaze-r2-with-rclone/" />
<meta property="article:published_time" content="2017-05-08T00:00:00+00:00" />
<meta property="article:modified_time" content="2017-05-08T00:00:00+00:00" />


    
      <base href="https://hunterparks.com/posts/backing-up-file-to-backblaze-r2-with-rclone/">
    
    <title>
  Backing up Files to Backblaze B2 with Rclone · HunterParks
</title>

    
      <link rel="canonical" href="https://hunterparks.com/posts/backing-up-file-to-backblaze-r2-with-rclone/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css" integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://hunterparks.com/css/coder.min.a4f332213a21ce8eb521670c614470c58923aaaf385e2a73982c31dd7642decb.css" integrity="sha256-pPMyITohzo61IWcMYURwxYkjqq84XipzmCwx3XZC3ss=" crossorigin="anonymous" media="screen" />
    

    

    
      
        
        
        <link rel="stylesheet" href="https://hunterparks.com/css/coder-dark.min.e78e80fc3a585a4d1c8fc7f58623b6ff852411e38431a9cd1792877ecaa160f6.css" integrity="sha256-546A/DpYWk0cj8f1hiO2/4UkEeOEManNF5KHfsqhYPY=" crossorigin="anonymous" media="screen" />
      
    

    

    

    <link rel="icon" type="image/png" href="https://hunterparks.com/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://hunterparks.com/images/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.69.2" />
  </head>

  
  
    
  
  <body class="colorscheme-auto">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://hunterparks.com/">
      HunterParks
    </a>
    
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://hunterparks.com/about/">About</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://hunterparks.com/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://hunterparks.com/projects/">Projects</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://hunterparks.com/contact/">Contact</a>
          </li>
        
      
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">Backing up Files to Backblaze B2 with Rclone</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2017-05-08T00:00:00Z'>
                May 8, 2017
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              5-minute read
            </span>
          </div>
          
          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="https://hunterparks.com/tags/backup/">backup</a></div>

        </div>
      </header>

      <div>
        
        <p>Backing up files is arguably one of the most important things someone can do on their computer. Ensuring there is a copy of your most important data affords you the ability to not worry about a future ransomware virus, a stolen/broken computer, or just a simple accident that could erase your information forever.</p>
<p>A strategy that is widely seen as a very effective way to backup your data is the 3-2-1 Backup Rules/Best Practices:</p>
<figure>
    <img src="https://hunterparks.com/images/321.png"
         alt="The 3-2-1 Backup Rules/Best Practices"/> <figcaption>
            <p>The 3-2-1 Backup Rules/Best Practices</p>
        </figcaption>
</figure>

<p>With the following guide, I hope to be able to have an additional copy of my data, stored on a different storage type, and synced with a cloud service provider - Backblaze in this case.</p>
<h1 id="preparing-the-hardware-optional-">Preparing the Hardware (optional)</h1>
<p>If you already have a computer setup, please skip this step. If not, see the list of hardware I used for this project - found below:</p>
<ul>
<li>Raspberry Pi 3 Model B</li>
<li>Raspberry PI Case</li>
<li>SD Card</li>
<li>Internal Hard Drive</li>
<li>External Hard Drive Enclosure</li>
</ul>
<p><strong>Note</strong>: If you do not have an extra hard drive sitting around, you can purchase external drive instead.</p>
<h1 id="preparing-the-computer-">Preparing the Computer</h1>
<p>The only prerequisite for the computer is that you have Windows, macOS, or Linux installed and functioning. Plug in your external hard drive and make sure that it is functioning correctly. Additionally, ensure that you have an active internet connection as that will be required for installing the necessary software and uploading your files to Backblaze B2 for backup.</p>
<h1 id="backing-up-your-files-">Backing up Your Files</h1>
<h3 id="step-1---set-up-a-backblaze-b2-account-">Step 1 - Set Up a Backblaze B2 Account</h3>
<p>While Rclone supports many different cloud providers (see their website <a href="https://rclone.org/overview/">here</a>), I will be using <a href="https://www.backblaze.com/b2/cloud-storage.html">B2</a> from <a href="https://www.backblaze.com/">Backblaze</a>. Follow the instructions on the B2 website to setup your B2 account and get your API key - this key will allow you to access you B2 account through Rclone.</p>
<h3 id="step-2---install-rclone-">Step 2 - Install Rclone</h3>
<p>Rclone will need to be installed on the computer you are using to store your files. If you are not using the same hardware I am, please install the Rclone version that will work for your computer. Visit the Rclone <a href="https://rclone.org/downloads/">downloads</a> page to find the installer for your computer. If you are following my hardware choice, select the ARM - 32 Bit installer. Finally, follow the <a href="https://rclone.org/install/">installation instructions</a> on the Rclone website to <em>properly</em> install Rclone on your computer.</p>
<h3 id="step-3---connect-rclone-to-backblaze-b2-">Step 3 - Connect Rclone to Backblaze B2</h3>
<ol>
<li>Run <code>rclone config</code>.</li>
<li>Press <code>n</code> to create a new remote.</li>
<li>Specify a name to reference this remote in commands. For my purposes, I chose <code>remote</code>.</li>
<li>Press <code>2</code> then hit <code>enter</code> to select Backblaze B2.</li>
<li>Enter your Backblaze Account ID then hit <code>enter</code>.
<!-- raw HTML omitted -->This will look something like <code>123456789abc</code>.<!-- raw HTML omitted --></li>
<li>Enter your Backblaze Application Key then hit <code>enter</code>.
<!-- raw HTML omitted -->This will look something like <code>0123456789abcdef0123456789abcdef0123456789</code>.<!-- raw HTML omitted --></li>
<li>Leave Endpoint blank then hit <code>enter</code>.</li>
<li>Press <code>y</code> then hit <code>enter</code> to save configuration.</li>
</ol>
<p>For more information, please visit the <a href="https://rclone.org/b2/">Rclone B2</a> website.</p>
<h3 id="step-4---configure-encryption-in-rclone-">Step 4 - Configure Encryption in Rclone</h3>
<ol>
<li>Run <code>rclone config</code>.</li>
<li>Press <code>n</code> to create an encrypted container.</li>
<li>Specify a name to reference this container in commands. For my purposes, I chose <code>secret</code>.</li>
<li>Press <code>5</code> then hit <code>enter</code> to select crypt.</li>
<li>Enter <code>&lt;REMOTE_NAME&gt;:&lt;B2_BUCKET_NAME&gt;</code> then hit <code>enter</code> to select the previously made remote.
<!-- raw HTML omitted -->For my purpose, this is <code>remote:backup</code> where <code>backup</code> is the name of my B2 bucket.<!-- raw HTML omitted --></li>
<li>Type <code>standard</code> for encrypted file names.</li>
<li>Choose a passphrase or generate one.
<!-- raw HTML omitted -->It is important that you remember your passphrase - you will not be able to decrypt your backups without it.<!-- raw HTML omitted --></li>
<li>Choose a salt or generate one.
<!-- raw HTML omitted -->It is important that you remember your salt - you will not be able to decrypt your backups without it.<!-- raw HTML omitted --></li>
<li>Press <code>y</code> to confirm the configuration and press <code>q</code> to close Rclone.</li>
</ol>
<h3 id="step-5---backing-up-your-files-">Step 5 - Backing up Your Files</h3>
<p>Now, when wanting to backup a folder to BackBlaze, type the following command:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">rclone sync /path/to/folder secret:
</code></pre></div><p>This line takes all of your files in the folder path and uploads them to your Backblaze B2 bucket. For me, I write the following line:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">rclone sync Backup/ secret
</code></pre></div><p><!-- raw HTML omitted -->Note<!-- raw HTML omitted -->: There are two options for uploading to the cloud. While I use <code>sync</code>, you can also use <code>copy</code>. Here are the differences:</p>
<ul>
<li><code>Sync</code> will mirror the folder path exactly from your local filesystem to Backblaze. This deletes files in the destination that have been removed from the source.</li>
<li><code>Copy</code> will copy files from your local filesystem to Backblaze where deleted files will NOT be deleted from Backblaze.</li>
</ul>
<p>If you have a lot of files to upload that could take a long time, use the following command so that output is recorded to a file and the upload will not get killed if you log out:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">setsid [command] --log-file /path/to/file.log &amp;&gt;/dev/null
</code></pre></div><p>where <code>[command]</code> is the command you used above.</p>
<h3 id="step-6---backup-automation-">Step 6 - Backup Automation</h3>
<p>The following set of commands will setup your computer to run an automatic backup of your files.</p>
<ol>
<li>Run <code>crontab -e</code></li>
<li>At the end of the file, add the following command:</li>
</ol>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">0 * * * * /usr/bin/setsid /usr/sbin/rclone sync /path/to/folder secret: &amp;&gt;/dev/null
</code></pre></div><ol start="3">
<li>Save and exit your crontab file.</li>
</ol>
<p><strong>Note</strong>: You can add an output log file by using the <code>--log-file</code> parameter found in step 5. Additionally, you can also choose between the <code>sync</code> and <code>copy</code> rclone modes.</p>
<h3 id="step-7---restoring-your-files-">Step 7 - Restoring Your Files</h3>
<p>To obtain you files from Backblaze, you will need to configure rclone on a new machine or you will need to move to a different location of your uploading computer. It can be helpful to backup you configuration files to make it easier to restore. Once your configuration is correct, run the following command:</p>
<div class="highlight"><pre style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">rclone sync secret: /path/to/folder
</code></pre></div><!-- raw HTML omitted -->
<h3 id="thats-it-">That&rsquo;s it!</h3>
<p>Your files are now being securely backed up to the cloud!</p>
<p>Big shoutout to <a href="https://gist.github.com/defectivebit">defectivebit</a> on GitHub who wrote <a href="https://gist.github.com/defectivebit/95b159ed5ba7e1d5d85d74c6e4b04dea">this</a> awesome Gist that helped guide me on getting my backup setup.</p>

      </div>


      <footer>
        


        
        
        
      </footer>
    </article>

    
  </section>

      </div>

      
  <footer class="footer">
    <section class="container">
      
        <p>Engineering with &#10084;</p>
      
      
        ©
        
        2020
         Hunter Parks 
      
      
         · 
        Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.
      
      
    </section>
  </footer>

    </main>

    

    

    

  </body>

</html>
